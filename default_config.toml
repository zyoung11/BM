# BM Music Player Configuration File
# Configuration path: ~/.config/BM/config.toml
# Restart the program for changes to take effect.
#
# BM 音乐播放器配置文件
# 配置文件路径: ~/.config/BM/config.toml
# 修改配置后重启程序生效

[app]
# Maximum number of history entries - limits the maximum number of playback history records.
#
# 最大历史记录数量 - 限制播放历史记录的最大条数
max_history_size = 100

# Song switching debounce time (milliseconds) - prevents rapid continuous song switching, avoiding misoperation.
#
# 切歌防抖时间（毫秒）- 防止快速连续切歌，避免误操作
switch_debounce_ms = 1000

# Default starting page - the page displayed when the program starts.
# 0 = Player page, 1 = PlayList page, 2 = Library page.
#
# 默认启动页面 - 程序启动时显示的页面。
# 0 = 播放器页面, 1 = 播放列表页面, 2 = 媒体库页面。
default_page = 2

# Default play mode - the playback mode when the program starts.
# 0 = repeat one, 1 = repeat all, 2 = random, 3 = memory (use saved play mode from last session).
#
# 默认播放模式 - 程序启动时的播放模式。
# 0 = 单曲循环, 1 = 列表循环, 2 = 随机播放, 3 = 记忆（使用上次保存的播放模式）。
default_play_mode = 3

# Whether to remember the music library path - if true, the program will remember the last used music library path.
# If no path parameter is specified next time the program starts, the saved path will be used automatically.
#
# 是否记录音乐库路径 - 如果为true，程序会记住上次使用的音乐库路径。
# 下次启动时如果不指定路径参数，会自动使用保存的路径。
remember_library_path = true

# Whether to record the playlist - if true, the program will record the playlist and load it next time it starts.
# Note: 'remember_library_path' must also be true for this to take effect.
#
# 是否记录播放列表 - 如果为true，程序会记录播放列表并在下次启动时加载。
# 注意: 'remember_library_path' 也必须为 true 才能生效。
playlist_history = true

# Autostart last played song
# When enabled, the program will automatically play the last played song when starting.
# Note: This requires both 'remember_library_path' and 'playlist_history' to be enabled.
#
# 自动播放上次播放的歌曲
# 启用后，程序启动时会自动播放上次播放的歌曲。
# 注意：这需要 'remember_library_path' 和 'playlist_history' 同时启用。
autostart_last_played = true

# Whether to remember the volume of the last playback
#
# 是否记住上次播放的音量
remember_volume = true

# Whether to remember the playback rate
#
# 是否记录播放速度
remember_playback_rate = true

# Audio resampling quality - determines the quality of audio resampling when sample rate conversion is needed.
# Available options: "quick", "low", "medium", "high", "very_high"
#
# 音频重采样质量 - 当需要进行采样率转换时，决定音频重采样的质量。
# 可用选项: "quick", "low", "medium", "high", "very_high"
resampling_quality = "quick"

# Default text color - the color used for text display when no suitable color is found from album art.
# RGB values range from 0 to 255.
#
# 默认文字颜色 - 当从专辑封面中找不到合适的颜色时，用于文字显示的颜色。
# RGB 值的范围是 0 到 255。
default_color_r = 100
default_color_g = 149
default_color_b = 237

# Image rendering protocol - determines which terminal protocol to use for displaying album art.
# Available options: "auto", "kitty", "sixel", "iterm2"
# "auto" will automatically detect the best available protocol.
#
# 图像渲染协议 - 决定使用哪种终端协议来显示专辑封面。
# 可用选项: "auto", "kitty", "sixel", "iterm2"
# "auto" 会自动检测最佳可用协议。
image_protocol = "auto"

# Enable desktop notifications - whether to show desktop notifications when songs change.
# If true, the program will send desktop notifications using the freedesktop.org standard.
#
# 启用桌面通知 - 是否在歌曲切换时显示桌面通知。
# 如果为true，程序将使用freedesktop.org标准发送桌面通知。
enable_notifications = true

# Storage file path - used to save full path information entered by the user.
#
# 存储文件路径 - 用于保存用户输入的完整路径信息。
storage = "~/.config/BM/storage.json"

# Target audio sample rate (Hz) - the sample rate of the audio output device when the program starts.
# Common values: 44100 (CD), 48000 (professional audio/video).
# Changing this value can optimize playback performance for specific sample rates and reduce unnecessary resampling.
#
# 目标音频采样率 (Hz) - 程序启动时音频输出设备的采样率。
# 常见值: 44100 (CD), 48000 (专业音频/视频)。
# 更改此值可优化特定采样率音频的播放性能，减少不必要的重采样。
target_sample_rate = 44100

# Default cover art path - the image file to use when a song has no embedded cover art.
# Supports JPG and PNG formats. If empty or the file doesn't exist, no cover will be shown.
#
# 默认封面图片路径 - 当歌曲没有内嵌封面时使用的图片文件。
# 支持 JPG 和 PNG 格式。如果为空或文件不存在，则不显示封面。
default_cover_path = "~/.config/BM/default.jpg"

# Enable folder cover art - when a song has no embedded cover art, search for image files
# (jpg, jpeg, png) in the same folder and use one as the cover.
# If multiple images are found, one is randomly selected.
# Priority is given to files with names containing cover-related keywords (cover, folder, album, etc.)
#
# 启用文件夹封面功能 - 当歌曲没有内嵌封面时，在相同文件夹中搜索图片文件
# (jpg, jpeg, png) 并使用其中一张作为封面。
# 如果找到多个图片，随机选择一张。
# 优先选择文件名包含封面相关关键词的图片（cover、folder、album等）
enable_folder_covers = true

# Keymap settings - defines all keybindings for the application.
#
# 键位映射设置 - 定义应用程序的所有按键绑定。
[keymap]

  # Global keybindings - effective across all pages.
  #
  # 全局快捷键 - 在所有页面都有效。
  [keymap.global]

    # Quit the program.
    #
    # 退出程序。
    Quit = ["esc"]

    # Cycle through pages.
    #
    # 循环切换页面。
    CyclePages = ["tab"]

    # Switch to the Player page.
    #
    # 切换到播放器页面。
    SwitchToPlayer = ["1"]

    # Switch to the PlayList page.
    #
    # 切换到播放列表页面。
    SwitchToPlayList = ["2"]

    # Switch to the Library page.
    #
    # 切换到音乐库页面。
    SwitchToLibrary = ["3"]

  # Player page keybindings.
  #
  # 播放器页面快捷键。
  [keymap.player]

    # Toggle play/pause.
    #
    # 播放/暂停。
    TogglePause = ["space"]

    # Seek forward by 5 seconds.
    #
    # 快进5秒。
    SeekForward = ["e", "l"]

    # Seek backward by 5 seconds.
    #
    # 快退5秒。
    SeekBackward = ["q", "h"]

    # Increase volume.
    #
    # 音量增加。
    VolumeUp = ["w", "up"]

    # Decrease volume.
    #
    # 音量减少。
    VolumeDown = ["s", "down"]

    # Increase playback rate.
    #
    # 播放速度增加。
    RateUp = ["x", "k"]

    # Decrease playback rate.
    #
    # 播放速度减少。
    RateDown = ["z", "j"]

    # Play the next song.
    #
    # 下一首歌曲。
    NextSong = ["d", "right"]

    # Play the previous song.
    #
    # 上一首歌曲。
    PrevSong = ["a", "left"]

    # Toggle play mode.
    #
    # 切换播放模式。
    TogglePlayMode = ["r"]

    # Toggle text color (album cover color/white).
    #
    # 切换文字颜色（专辑封面颜色/白色）。
    ToggleTextColor = ["c"]

    # Reset volume and playback rate.
    #
    # 重置音量和播放速度。
    Reset = ["backspace"]

  # Library page keybindings.
  #
  # 媒体库页面快捷键。
  [keymap.library]

    # Navigate up.
    #
    # 向上导航。
    NavUp = ["k", "w", "up"]

    # Navigate down.
    #
    # 向下导航。
    NavDown = ["j", "s", "down"]

    # Enter directory.
    #
    # 进入目录。
    NavEnterDir = ["l", "d", "right"]

    # Exit directory.
    #
    # 退出目录。
    NavExitDir = ["h", "a", "left"]

    # Toggle selection for the current item.
    #
    # 切换选择当前项目。
    ToggleSelect = ["space"]

    # Toggle selection for all items.
    #
    # 切换选择所有项目。
    ToggleSelectAll = ["e"]

    # Enter search mode.
    #
    # 进入搜索模式。
    Search = ["f"]
    
    # Search mode keybindings.
    #
    # 搜索模式快捷键。
    [keymap.library.SearchMode]

      # Confirm search.
      #
      # 确认搜索。
      ConfirmSearch = ["enter"]

      # Exit search.
      #
      # 退出搜索。
      EscapeSearch = ["esc"]

      # Backspace in search box.
      #
      # 搜索框退格。
      SearchBackspace = ["backspace"]

  # Playlist page keybindings.
  #
  # 播放列表页面快捷键。
  [keymap.playlist]

    # Navigate up.
    #
    # 向上导航。
    NavUp = ["k", "w", "up"]

    # Navigate down.
    #
    # 向下导航。
    NavDown = ["j", "s", "down"]

    # Remove the selected song from the playlist.
    #
    # 从播放列表中移除歌曲。
    RemoveSong = ["space"]

    # Play the selected song.
    #
    # 播放选中的歌曲。
    PlaySong = ["enter"]

    # Enter search mode.
    #
    # 进入搜索模式。
    Search = ["f"]
    
    # Search mode keybindings.
    #
    # 搜索模式快捷键。
    [keymap.playlist.SearchMode]

      # Confirm search.
      #
      # 确认搜索。
      ConfirmSearch = ["enter"]

      # Exit search.
      #
      # 退出搜索。
      EscapeSearch = ["esc"]

      # Backspace in search box.
      #
      # 搜索框退格。
      SearchBackspace = ["backspace"]
