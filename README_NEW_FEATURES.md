# 新功能：自动记录音乐库路径

## 功能说明

现在 BM 音乐播放器支持自动记录和记住用户上次使用的音乐库路径。

## 配置选项

在 `config.toml` 的 `[app]` 部分新增了两个配置项：

```toml
[app]
# 是否记录音乐库路径 - 如果为true，程序会记住上次使用的音乐库路径
# 下次启动时如果不指定路径参数，会自动使用保存的路径
# 默认值: true
remember_library_path = true

# 保存的音乐库路径 - 当 remember_library_path 为 true 时，程序会保存并自动使用此路径
# 默认值: "" (空字符串)
library_path = ""
```

## 使用方法

### 1. 首次使用（带路径参数）
```bash
./bm /path/to/your/music
```
- 程序会验证路径有效性
- 如果 `remember_library_path = true`，路径会被自动保存到配置文件中

### 2. 后续使用（不带路径参数）
```bash
./bm
```
- 程序会自动使用上次保存的路径
- 如果保存的路径无效，会显示错误信息

### 3. 禁用路径记录
```toml
remember_library_path = false
```
- 禁用此功能后，每次启动都必须提供路径参数

## 使用场景

1. **日常使用**：设置一次路径后，后续直接运行 `./bm` 即可
2. **多音乐库**：可以手动修改配置文件中的 `library_path` 来切换不同音乐库
3. **临时使用**：禁用 `remember_library_path` 或使用参数覆盖保存的路径

## 错误处理

- 如果保存的路径不存在或无效，程序会显示错误并退出
- 用户需要提供有效的路径参数或修复配置文件中的路径

## 向后兼容

- 现有用户配置文件会自动升级包含新配置项
- 默认启用路径记录功能
- 不影响现有的命令行参数使用方式